import java.security.SecureRandom;

public class PasswordGenerator {
    private static final String MAJUSCULES = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    private static final String MINUSCULES = "abcdefghijklmnopqrstuvwxyz";
    private static final String CARACTERES_SPECIAUX = "!@#$%^&*()-_=+[]{}|;:'\"<>,.?/";

    public static void main(String[] args) {
        SecureRandom random = new SecureRandom();

        // Générez une longueur de mot de passe aléatoire entre 8 et 12
        int passwordLength = random.nextInt(5) + 8;

        // Générez au moins un caractère de chaque type
        String password = "";

        // Utilisez un random pour déterminer combien de majuscules, de minuscules et de caractères spéciaux ajouter
        int numMajuscules = random.nextInt(3) + 1;
        int numMinuscules = random.nextInt(3) + 1;
        int numCaracteresSpeciaux = random.nextInt(3) + 1;

        for (int i = 0; i < numMajuscules; i++) {
            password += MAJUSCULES.charAt(random.nextInt(MAJUSCULES.length()));
        }

        for (int i = 0; i < numMinuscules; i++) {
            password += MINUSCULES.charAt(random.nextInt(MINUSCULES.length()));
        }

        for (int i = 0; i < numCaracteresSpeciaux; i++) {
            password += CARACTERES_SPECIAUX.charAt(random.nextInt(CARACTERES_SPECIAUX.length()));
        }

        // Générez le reste du mot de passe
        for (int i = numMajuscules + numMinuscules + numCaracteresSpeciaux; i < passwordLength; i++) {
            String allCharacters = MAJUSCULES + MINUSCULES + CARACTERES_SPECIAUX;
            password += allCharacters.charAt(random.nextInt(allCharacters.length()));
        }

        System.out.println("Mot de passe généré : " + password);
    }
}
